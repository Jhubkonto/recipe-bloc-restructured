(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[4],{56:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return l})),a.d(t,"d",(function(){return c}));var n=a(61),r=function(){return{type:"REQUIRE"}},i=function(e){return{type:"MINLENGTH",val:e}},l=function(){return{type:"EMAIL"}},c=function(e,t){var a,r=!0,i=Object(n.a)(t);try{for(i.s();!(a=i.n()).done;){var l=a.value;"REQUIRE"===l.type&&(r=r&&e.trim().length>0),"MINLENGTH"===l.type&&(r=r&&e.trim().length>=l.val),"MAXLENGTH"===l.type&&(r=r&&e.trim().length<=l.val),"MIN"===l.type&&(r=r&&+e>=l.val),"MAX"===l.type&&(r=r&&+e<=l.val),"EMAIL"===l.type&&(r=r&&/^\S+@\S+\.\S+$/.test(e))}}catch(c){i.e(c)}finally{i.f()}return r}},58:function(e,t,a){"use strict";var n=a(4),r=a(55),i=a(0),l=a.n(i),c=a(56),u=(a(59),function(e,t){switch(t.type){case"CHANGE":return Object(r.a)(Object(r.a)({},e),{},{value:t.val,isValid:Object(c.d)(t.val,t.validators)});case"TOUCH":return Object(r.a)(Object(r.a)({},e),{},{isTouched:!0});default:return e}});t.a=function(e){var t=Object(i.useReducer)(u,{value:e.initialValue||"",isTouched:!1,isValid:e.initialValid||!1}),a=Object(n.a)(t,2),r=a[0],c=a[1],s=e.id,o=e.onInput,d=r.value,p=r.isValid;Object(i.useEffect)((function(){o(s,d,p)}),[s,d,p,o]);var f=function(t){c({type:"CHANGE",val:t.target.value,validators:e.validators})},v=function(){c({type:"TOUCH"})},m="input"===e.element?l.a.createElement("input",{id:e.id,type:e.type,placeholder:e.placeholder,onChange:f,onBlur:v,value:r.value}):l.a.createElement("textarea",{id:e.id,rows:e.rows||3,onChange:f,onBlur:v,value:r.value});return l.a.createElement("div",{className:"form-control ".concat(!r.isValid&&r.isTouched&&"form-control--invalid")},l.a.createElement("label",{htmlFor:e.id},e.label),m,!r.isValid&&r.isTouched&&l.a.createElement("p",null,e.errorText))}},59:function(e,t,a){},60:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(4),r=a(57),i=a(55),l=a(0),c=function(e,t){switch(t.type){case"INPUT_CHANGE":var a=!0;for(var n in e.inputs)e.inputs[n]&&(a=n===t.inputId?a&&t.isValid:a&&e.inputs[n].isValid);return Object(i.a)(Object(i.a)({},e),{},{inputs:Object(i.a)(Object(i.a)({},e.inputs),{},Object(r.a)({},t.inputId,{value:t.value,isValid:t.isValid})),isValid:a});case"SET_DATA":return{inputs:t.inputs,isValid:t.formIsValid};default:return e}},u=function(e,t){var a=Object(l.useReducer)(c,{inputs:e,isValid:t}),r=Object(n.a)(a,2),i=r[0],u=r[1];return[i,Object(l.useCallback)((function(e,t,a){u({type:"INPUT_CHANGE",value:t,isValid:a,inputId:e})}),[]),Object(l.useCallback)((function(e,t){u({type:"SET_DATA",inputs:e,formIsValid:t})}),[])]}},62:function(e,t,a){"use strict";(function(e){var n=a(4),r=a(0),i=a.n(r),l=a(11);a(63);t.a=function(t){var a=Object(r.useState)(),c=Object(n.a)(a,2),u=c[0],s=c[1],o=Object(r.useState)(),d=Object(n.a)(o,2),p=d[0],f=d[1],v=Object(r.useState)(!1),m=Object(n.a)(v,2),b=m[0],E=m[1],O=Object(r.useRef)();Object(r.useEffect)((function(){if(u){var e=new FileReader;e.onload=function(){f(e.result)},e.readAsDataURL(u)}}),[u]);return i.a.createElement("div",{className:"form-control"},i.a.createElement("input",{id:t.id,ref:O,style:{display:"none"},type:"file",accept:".jpg,.png,.jpeg",onChange:function(a){var n,r,i=b;if(a.target.files&&1===a.target.files.length){n=a.target.files[0];var l=new FileReader;l.onloadend=function(){var t=l.result,a=new e(t).toString("base64");localStorage.setItem("myImage",a);new e(a,"base64").toString("ascii")},l.readAsDataURL(n),r=localStorage.getItem("myImage"),console.log(r),s(n),E(!0),i=!0}else E(!1),i=!1;t.onInput(t.id,n,i)}}),i.a.createElement("div",{className:"image-upload ".concat(t.center&&"center")},i.a.createElement("div",{className:"image-upload__preview"},p&&i.a.createElement("img",{src:p,alt:"Preview"}),!p&&i.a.createElement("p",null,"Please pick an image.")),i.a.createElement(l.a,{type:"button",onClick:function(){O.current.click()}},"PICK IMAGE")),!b&&i.a.createElement("p",null,t.errorText))}}).call(this,a(65).Buffer)},63:function(e,t,a){},64:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(9),r=a.n(n),i=a(12),l=a(4),c=a(0),u=a.n(c),s=a(1),o=a(58),d=a(11),p=a(17),f=a(14),v=a(62),m=a(56),b=a(60),E=a(18),O=(a(64),a(15));t.default=function(){var e=Object(c.useContext)(O.a),t=Object(E.a)(),a=t.isLoading,n=t.error,j=t.sendRequest,g=t.clearError,y=Object(b.a)({title:{value:"",isValid:!1},description:{value:"",isValid:!1},address:{value:"",isValid:!1},image:{value:null,isValid:!1}},!1),h=Object(l.a)(y,2),I=h[0],T=h[1],V=Object(s.g)(),A=function(){var t=Object(i.a)(r.a.mark((function t(a){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,(n=new FormData).append("title",I.inputs.title.value),n.append("description",I.inputs.description.value),n.append("address",I.inputs.address.value),n.append("image",I.inputs.image.value),t.next=9,j("http://localhost:5000/api/recipes","POST",n,{Authorization:"Bearer "+e.token});case 9:V.push("/"),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(1);case 14:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,u.a.createElement(p.a,{error:n,onClear:g}),u.a.createElement("form",{className:"recipe-form",onSubmit:A},a&&u.a.createElement(f.a,{asOverlay:!0}),u.a.createElement(o.a,{id:"title",element:"input",type:"text",label:"Title",validators:[Object(m.c)()],errorText:"Please enter a valid title.",onInput:T}),u.a.createElement(o.a,{id:"description",element:"textarea",label:"Description",validators:[Object(m.b)(5)],errorText:"Please enter a valid description (at least 5 characters).",onInput:T}),u.a.createElement(o.a,{id:"address",element:"input",type:"url",label:"Weblink",validators:[Object(m.c)()],errorText:"Please enter a valid internet address.",onInput:T}),u.a.createElement(v.a,{id:"image",onInput:T,errorText:""}),u.a.createElement(d.a,{type:"submit",disabled:!I.isValid},"ADD RECIPE")))}}}]);
//# sourceMappingURL=4.da4ea3f1.chunk.js.map